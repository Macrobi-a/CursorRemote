# Railway deployment: persistent server for the recruitment workflow
# Deploy: railway link && railway up (or connect repo and auto-deploy)
# Docs: https://docs.railway.app/

[build]
builder = "dockerfile"
dockerfilePath = "Dockerfile.chainlit"  # Use Chainlit Dockerfile for browser UI

[deploy]
# Chainlit runs on port from Dockerfile CMD (uses ${PORT:-8000})
# startCommand removed - Dockerfile CMD handles PORT expansion
healthcheckPath = "/"
healthcheckTimeout = 60
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

# Alternative: Use Dockerfile (FastAPI server) instead of Dockerfile.chainlit
# Set dockerfilePath = "Dockerfile" and startCommand = "python -m uvicorn server:app --host 0.0.0.0 --port $PORT"
